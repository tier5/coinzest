<script>

	  app.controller('PageController', ['$scope', '$http', '$window', function($scope, $http, $window) {

		var vm = this;
		vm.arr_data = [];

		vm.search = "";
	
		
		var data = [];


		$http({
		    method: 'POST',
		    url: '/platform/dailytasks/get_data/',
			data: { }
		}).success(function (result) {
			if (result.is_success) {
				vm.arr_data = result.arr_data;
			}
		});

		vm.edit_click = function(id) {
			$window.location = "/platform/dailytasks/edit/" + id;
			
		};

		vm.delete_click = function(index) {
			var result = $window.confirm('Are you sure you want to delete?');
                        if (result) {
                                $http({
                                    method: 'get',
                                    url: '/segments/delete/' + index,
                                }).success(function (result) {
                                        $window.location = "/segments";
                                });
                        }
		};

		vm.add = function() {
			$window.location = "/platform/dailytasks/edit/0";
			
		};


	}]);

</script>

<style>

	.table_header {
		font-weight:900;
	}
	td {
		padding-left:10px;
		padding-right:10px;
	}

	.data_table_odd_cell {

		background-color: #f8f8f8;
		border-bottom:1px solid  #d8d8d8;
		padding-top:13px;
		padding-bottom:13px;
	}


	.data_table_even_cell {
		background-color: #ffffff;
		border-bottom:1px solid  #d8d8d8;
		padding-top:13px;
		padding-bottom:13px;
	}

	.data_table > tr:hover > td {
		background-color: #ffff99;
	}

	tr.have_hover:hover > td {
		background-color: #add8e6;
	}

	td.clickable:hover {
		cursor:pointer;
	}

	th {
		padding-left:10px !important;
		padding-right:10px !important;
	}
</style>
<div class="page-title-header">
	Modify Daily Tasks
</div>

<div ng-controller="PageController as page_ctrl">

		<div style="clear:both;"></div>

		<div class="flex_container">
			<div style="width:800px;">
				<div class="col-md-12">

					<div style="width:100%;">
						<div class="form-group">
							<label for="email">Search:</label>
							<div style="clear:both;"></div>
							<div style="float:left; width:250px;">
								<input type="text" ng-model="search" class="form-control" placeholder="Enter Your Search" ng-keyup="$event.keyCode == 13 && search_submission()">
							</div>
							<div style="padding-left:10px;float:right; padding-right:50px;">
								<button type="btn"  ng-click="page_ctrl.add()" class="btn btn-primary">Add Daily Task</button>
							</div>
							<div style="clear:both;"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div style="clear:both;"></div>
		<div class="flex_container">
			<div style="width:800px;">

				<table  style="border-collapse: collapse; margin:10px;"  class="data_table">
				<tr>
				<th class="table_header">Sr. No</th>
				<th class="table_header">Name</th>
				<th class="table_header">Description</th>
				<th colspan="1"></th>
				</tr>
				<tr ng-if="page_ctrl.arr_data.length == 0">
					<td colspan="3">
					      <strong>No results found...</strong>
					</td>
				</tr>

				<tr class="have_hover" ng-repeat="data in page_ctrl.arr_data track by $index">
				<td ng-class-odd="'data_table_odd_cell'" ng-class-even="'data_table_even_cell'">{{$index+1}}</td>
				<td ng-class-odd="'data_table_odd_cell'" ng-class-even="'data_table_even_cell'">{{data.title}}</td>
				<td ng-class-odd="'data_table_odd_cell'" ng-class-even="'data_table_even_cell'">{{data.description}}</td>
				<td ng-class-odd="'data_table_odd_cell'" ng-class-even="'data_table_even_cell'">
					<button ng-click="page_ctrl.edit_click(data.id)" type = "button" class = "btn btn-success">Edit</button>
				</td>
				<td ng-class-odd="'data_table_odd_cell'" ng-class-even="'data_table_even_cell'">
				</td>
					
				</td>
				</tr>
				</table>
			</div>
		</div>
	</div>
</div>


</div>
