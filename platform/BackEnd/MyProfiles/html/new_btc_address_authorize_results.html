

<style>
	form.submitted input.ng-invalid
	{
	    border:1px solid #f00;
	}

	form.submitted select.ng-invalid
	{
	    border:1px solid #f00;
	}

	form.submitted .ng-invalid
	{
	    border:1px solid #f00;
	}


	.field_error
	{
	    border:1px solid #f00;
	}
</style>


<script>


	isFormValid = function ($scope, ngForm) {
		      var i = null;
		      //$scope.$emit('$validate');
		      $scope.$broadcast('$validate');
		      
		      if(! ngForm.$invalid) {
			return true;
		      } else {
			// make the form fields '$dirty' so that the validation messages would be shown
			ngForm.$dirty = true;
			
			for(i in ngForm) {
			  if(ngForm[i] && ngForm[i].hasOwnProperty && ngForm[i].hasOwnProperty('$dirty')) { // TODO: is 'field.$invalid' test required?
			    ngForm[i].$dirty = true;
			  }
			}
		      }
		    };


	  app.controller('PageController', ['$scope', '$http', '$timeout', '$window', function($scope, $http, $timeout, $window) {

		var vm = this;

		vm.t = {};
		vm.data = {};


		var current_location = String($window.location);

		var arr_split = [];
		var arr_split = current_location.split("/");

		var param_value = "";

		param_value = arr_split[arr_split.length-1];
		if (param_value == "") {
			param_value = arr_split[arr_split.length-2];
		}

		var user_id = param_value
		if (user_id == 'import_old_data') {
			user_id = 0;
		}

		vm.t.user_id = user_id;

		vm.view_data = {};

		vm.view_data.is_submit_success_message = false;

	    }]);

	</script>

	
	<div class="flex_container">
		<div ng-controller="PageController as page_ctrl" style="max-width:800px;">
			<div>
				<form ng-class="{submitted:password_form.$submitted}" name="btc_address_authorize_form" novalidate>
					<div style="padding-bottom:20px; padding-top:20px;">
					<div>
						<div ng-show="page_ctrl.view_data.is_submit_success_message" style="" class="alert alert-success" role="alert">
							You have successfully Changed Your Password.
						</div>
						<div ng-show="page_ctrl.view_data.is_submit_success_message" style="">
							<a href="/login.php">CLICK TO CONTINUE</a>
						</div>
					</div>
					<div class="col-xs-12">
						<div class="form-group">
							<?if($t->is_success) { ?>
								<div style="" class="alert alert-success" role="alert">
									You have successfully authorized your new bitcoin address:<br>
									<h1><? print $t->btc_address?></h1>
								</div>
							<? } else { ?>
								<div  style="" class="alert alert-danger" role="alert">
									<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
									<span class="sr-only">Error:</span>
									Unable To Authorize New Bitcoin Address. Please Try Again.
								</div>
							<? } ?>
						</div>
					</div>
				</form>
			</div> <!-- registration complete -->
		</div>
	</div>
</div>


<script type="text/ng-template" id="uploader_dialog">
        <div class="ngdialog-message">
		<div class="flex_container">
			<div style="font-size:24px; font-weight:900; padding-top:10px;">
			{{percentage_complete}}
			</div>
		</div>
        </div>
</script>

